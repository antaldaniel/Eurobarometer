<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Harmonizing Variable Names • eurobarometer</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Harmonizing Variable Names">
<meta property="og:description" content="eurobarometer">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eurobarometer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/create_tabels.html">Creating Variable and Values Tables</a>
    </li>
    <li>
      <a href="../articles/eurobarometer_class.html">The labelled_eurobarometer Class</a>
    </li>
    <li>
      <a href="../articles/harmonization.html">Survey Data Harmonization</a>
    </li>
    <li>
      <a href="../articles/metadata.html">Working With Metadata</a>
    </li>
    <li>
      <a href="../articles/variable_names.html">Harmonizing Variable Names</a>
    </li>
    <li>
      <a href="../articles/vocabulary.html">Working With Vocabularies</a>
    </li>
    <li>
      <a href="../articles/workflow.html">Workflow</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/antaldaniel/eurobarometer/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="variable_names_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="variable_names_files/kePrint-0.0.1/kePrint.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Harmonizing Variable Names</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/antaldaniel/eurobarometer/blob/master/vignettes/variable_names.Rmd"><code>vignettes/variable_names.Rmd</code></a></small>
      <div class="hidden name"><code>variable_names.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">eurobarometer</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">knitr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">kableExtra</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)</pre></body></html></div>
<div id="harmonizing-variable-names" class="section level1">
<h1 class="hasAnchor">
<a href="#harmonizing-variable-names" class="anchor"></a>Harmonizing Variable Names</h1>
<div id="normalization" class="section level2">
<h2 class="hasAnchor">
<a href="#normalization" class="anchor"></a>Normalization</h2>
<p>We are using the SPSS <code>.sav</code> files as a data resource from GESIS. The SPSS files are combining data with metadata labels. Furthermore, GESIS often includes metadata, including constants, into the SPSS file. The <a href="http://eurobarometer.danielantal.eu/reference/label_normalize.html">label_normalize()</a> function is used to create a first suggestion for a variable name using the GESIS SPSS file’s variable labels.</p>
<p>The normalization rules can be reviewed in the source code of the <code>normalize_names()</code> function.</p>
<p>The variable names are following the <code>underscore_separated</code>naming convention which is often called the <code>snake_case_convention</code>. We are using prefix and suffix conventions for easy separation and detachments of certain special variables and types.</p>
<ul>
<li><p>we are removing all special characters that may be understood as regular expressions, such as <code>%</code>, <code>]</code>, and all whitespace.</p></li>
<li><p>We use Eurostat abbreviations similar to some Eurostat metadata vocabularies for <code>greater than</code>, <code>lesser than</code> and similar quasi-arithmetic expressions, and <code>pct</code> for percent, percentage or the <code>%</code> sign.</p></li>
</ul>
<div id="prefix-conventions" class="section level3">
<h3 class="hasAnchor">
<a href="#prefix-conventions" class="anchor"></a>Prefix conventions</h3>
<ul>
<li><p><code>id_</code>: easy selection and detachments of constant metadata, such as the document object identifier or the version number of the data file; except for the <code>uniqid</code> variable, which is an observation / row identifier in almost all files.</p></li>
<li><p><code>mc_</code> : multiple choice question items. These are logically related variables that are given in the questionnaire in tabular format, but they are coded both in SPSS and R item by item as separate variables (columns). For the same (structured) question, we always use the <code>mc_this_question_item_1</code>, <code>mc_this_question_item_2</code>, <code>mc_this_question_item_dk</code> naming convention, where the <code>_dk</code> suffix contains the indication that the respondent rejected the entire complex question.</p></li>
<li><p><code>is_</code> : indicator questions, which may created from binary answer options, or from multiple-choice like questions without clear structure.</p></li>
</ul>
<p>These questions can easily be selected for example with the <code>tidyselect::starts_with(“mc_”)</code> selector which is widely used in the <code>tidyverse</code>.</p>
</div>
<div id="suffix-conventions" class="section level3">
<h3 class="hasAnchor">
<a href="#suffix-conventions" class="anchor"></a>Suffix conventions</h3>
<p>Currently we are only using suffixes for questionnaire variations. The most likely variation is related to the fact that some fieldwork areas are not part of the core Eurobarometer territory, and for some reason they separated in the original data file, because the respondent received a shorter, or slightly modified questionnaire. In these cases, some of the questions are the same as in the core questionnaire, and can be imputed to the core question.</p>
<ul>
<li><p><code>_tcc</code>: Question variation for members of the Turkish Cypriot community</p></li>
<li><p><code>_mk</code>: Question variation used in North Macedonia.</p></li>
</ul>
</div>
</div>
<div id="preferred-expressions" class="section level2">
<h2 class="hasAnchor">
<a href="#preferred-expressions" class="anchor"></a>Preferred expressions</h2>
<p>With often used variables, we try to use the nearest lower_snake_case version of the regularly used questionnaire name without alphanumeric IDs, because we believe that the researchers of Eurobarometer are familiar with these names. We use this for example with <code>age_exact</code>, <code>type_of_community</code> and some other often used variables.</p>
<p>Often, repeating (trend) questions can be found under several, often dissimilar labels. In these cases, we are choosing a preferred version of the variable name, and we are creating metadata tables to bring other variations to this format.</p>
</div>
<div id="less-frequent-questions-and-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#less-frequent-questions-and-variables" class="anchor"></a>Less frequent questions and variables</h2>
<p>In less frequently used questions, questionnaire items we are creating programmatic variable names using roughly the convention of rOpenSci. In these cases the creation of time series or data panels is less likely, or requires more work, because the questions or the questionnaire items are not the same. Our approach in this case is to create metadata tables for naming that are following topics. We hope to find contributors who are familiar with certain topics, and can organize the similar but not exactly the same variables into topical groups with similar variable names, such as variables related to trust in institutions or climate change. In these cases we follow general rules:</p>
<ul>
<li><p>The variable name starts with a more general concept and goes towards a specificity</p></li>
<li><p>When applicable, we prefer the rOpenSci <code>object_verb()</code> organization (see: <a href="https://devguide.ropensci.org/building.html#package-api">Function and argument naming</a>), but overrule it for convenience or avoiding awkward variable names.</p></li>
<li><p>Only fully identical questionnaire items have identical names</p></li>
<li><p>Similar questionnaire items have similarly structured names for easier selection and comparison</p></li>
<li><p>We try to avoid extremely long variable names</p></li>
</ul>
<p>The preferred variable names are stored in a topical metadata table that contains standardized topical keywords, and serves as a data and questionnaire map to the researcher.</p>
</div>
<div id="example-metadata-table" class="section level2">
<h2 class="hasAnchor">
<a href="#example-metadata-table" class="anchor"></a>Example Metadata Table</h2>
<p>This metadata table is created by <code>not_included/vignette_vocabulary_examples.R</code>. It is a good practice to create the metadata tables programmatically for reproducibility.</p>
<p>After the modification of the source code of this R file, <code>data-raw/create_categorical_var.R</code> can update the data file. The documentation of the metadata table should be updated in <code>R/data-category_label_2.R</code></p>
<p>Similar metadata tables should help the naming for similar variables (for example, in this case, often used two-level categories) or for topics (such as trust in institutions for not two-level variables, or air pollution and climate change related questions.)</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="st">"categorical_variables_2"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"eurobarometer"</span>)

<span class="no">categorical_variables_2</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>(<span class="kw">bootstrap_options</span> <span class="kw">=</span>
                  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),
                  <span class="kw">fixed_thead</span> <span class="kw">=</span> <span class="no">T</span>,
                  <span class="kw">font_size</span> <span class="kw">=</span> <span class="fl">10</span> ) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/add_header_above.html">add_header_above</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Filtering"</span> <span class="kw">=</span> <span class="fl">3</span>,
                       <span class="st">"Preferred Term"</span> <span class="kw">=</span> <span class="fl">1</span>,
                       <span class="st">"Keywords"</span> <span class="kw">=</span> <span class="fl">2</span>)
                     )</pre></body></html></div>
<table class="table table table-striped table-hover table-condensed">
<thead>
<tr>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Filtering
</div>
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Preferred Term
</div>
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Keywords
</div>
</th>
</tr>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filename
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
r_name
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
normalized_names
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
canonical_names
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
keyword_1
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
geo_qualifier
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8a_1
</td>
<td style="text-align:left;">
trust_in_institutions_written_press
</td>
<td style="text-align:left;">
trust_in_written_press
</td>
<td style="text-align:left;">
written_press
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8a_1
</td>
<td style="text-align:left;">
trust_in_institutions_written_press
</td>
<td style="text-align:left;">
trust_in_written_press
</td>
<td style="text-align:left;">
written_press
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8a_1
</td>
<td style="text-align:left;">
trust_in_institutions_written_press
</td>
<td style="text-align:left;">
trust_in_written_press
</td>
<td style="text-align:left;">
written_press
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8a_1
</td>
<td style="text-align:left;">
trust_in_institutions_written_press
</td>
<td style="text-align:left;">
trust_in_written_press
</td>
<td style="text-align:left;">
written_press
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8b_1
</td>
<td style="text-align:left;">
trust_in_institutions_written_press_tcc
</td>
<td style="text-align:left;">
trust_in_written_press_tcc
</td>
<td style="text-align:left;">
written_press
</td>
<td style="text-align:left;">
tcc
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa13_3
</td>
<td style="text-align:left;">
european_central_bank_trust
</td>
<td style="text-align:left;">
trust_in_european_central_bank
</td>
<td style="text-align:left;">
european_central_bank
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6928_v1-0-0.sav
</td>
<td style="text-align:left;">
qa14_1
</td>
<td style="text-align:left;">
european_parliament_trust
</td>
<td style="text-align:left;">
trust_in_european_parliament
</td>
<td style="text-align:left;">
european_parliament
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6928_v1-0-0.sav
</td>
<td style="text-align:left;">
qa14_3
</td>
<td style="text-align:left;">
european_central_bank_trust
</td>
<td style="text-align:left;">
trust_in_european_central_bank
</td>
<td style="text-align:left;">
european_central_bank
</td>
<td style="text-align:left;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA7576_v1-0-0.sav
</td>
<td style="text-align:left;">
qa14_1
</td>
<td style="text-align:left;">
european_parliament_trust
</td>
<td style="text-align:left;">
trust_in_european_parliament
</td>
<td style="text-align:left;">
european_parliament
</td>
<td style="text-align:left;">
NA
</td>
</tr>
</tbody>
</table>
<p>We must decide early on the column names of the metadata table itself, i.e. <code>filename</code>, <code>r_name</code>, <code>normalized_names</code>, <code>canonical_names</code>, <code>keyword_1</code>, <code>geo_qualifier</code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Daniel Antal.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
