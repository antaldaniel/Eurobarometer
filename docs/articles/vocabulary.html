<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Working With Vocabularies • eurobarometer</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Working With Vocabularies">
<meta property="og:description" content="eurobarometer">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eurobarometer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/harmonization.html">Survey Data Harmonization</a>
    </li>
    <li>
      <a href="../articles/metadata.html">Working With Metadata</a>
    </li>
    <li>
      <a href="../articles/vocabulary.html">Working With Vocabularies</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/antaldaniel/eurobarometer/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="vocabulary_files/kePrint-0.0.1/kePrint.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Working With Vocabularies</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/antaldaniel/eurobarometer/blob/master/vignettes/vocabulary.Rmd"><code>vignettes/vocabulary.Rmd</code></a></small>
      <div class="hidden name"><code>vocabulary.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">eurobarometer</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">tibble</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">knitr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">kableExtra</span>)
<span class="co"># The examples of this vignette can be found run with  </span>
<span class="co"># source(</span>
<span class="co">#  file.path("not_included", "vignette_vocabulary_examples.R")</span>
<span class="co">#  )</span></pre></body></html></div>
<p>There is no final metadata solution now. There are two main functions, <a href="http://eurobarometer.danielantal.eu/reference/gesis_metadata_create.html">gesis_metadata_create</a>, which mainly helps with normalizing the variable names, and <a href="http://eurobarometer.danielantal.eu/reference/gesis_vocabulary_create.html">gesis_vocabulary_create</a> (wrapped by <a href="http://eurobarometer.danielantal.eu/reference/gesis_corpus_create.html">gesis_corpus_create</a>), which help consolidating the vocabulary of questionnaire items.</p>
<p>They are both referring back to <a href="http://eurobarometer.danielantal.eu/reference/normalize_names.html">normalize_names</a> in normalizing labels. The <a href="http://eurobarometer.danielantal.eu/reference/canonical_names.html">canonical_names</a> is a very early attempt to use a canonical form of same questions that appear under different normalized forms.</p>
<p>This is a database created from 28 Eurobarometer SPSS files.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">metadata_database</span> <span class="kw">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="st">'..'</span>, <span class="st">'data-raw'</span>,
  <span class="st">'eb_metadata_database.rds'</span>))</pre></body></html></div>
<p>Let’s filter out a typical question type that has <code>Tend to trust</code> and <code>Tend not to trust</code> answer options, with differently encoded <code>Declined</code> to answer options.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">select_metadata_vars</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"filename"</span>, <span class="st">"r_name"</span>, <span class="st">"normalized_names"</span>,
                          <span class="st">"canonical_names"</span>,
                          <span class="st">"label_normalized"</span> , <span class="st">"label"</span>,
                          <span class="st">"item_no"</span>, <span class="st">"item_of"</span>)

<span class="no">trust_metadata</span> <span class="kw">&lt;-</span> <span class="no">metadata_database</span>  <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span> (
    <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>( <span class="st">"tend_to_trust|tend_not_to_trust"</span>, <span class="no">label_normalized</span> )
  )  <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span> ( <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">all_of</a></span>(<span class="no">select_metadata_vars</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span> ( <span class="no">normalized_names</span>, <span class="no">label_normalized</span>, <span class="no">filename</span> )</pre></body></html></div>
<p>To get the unique questions, let’s leave out the <code>Tend not to trust</code> negative answer options.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">require</a></span>(<span class="no">kableExtra</span>)
<span class="no">trust_metadata</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span> (
   <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>( <span class="st">"tend_to_trust"</span>, <span class="no">label_normalized</span> )
  ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span>(<span class="fl">15</span>) <span class="kw">%&gt;%</span> <span class="co"># Print only a sample of 15 rows</span>
<span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/reexports.html">kable</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>(<span class="kw">bootstrap_options</span> <span class="kw">=</span>
                <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),
                <span class="kw">fixed_thead</span> <span class="kw">=</span> <span class="no">T</span>,
                <span class="kw">font_size</span> <span class="kw">=</span> <span class="fl">7</span>)</pre></body></html></div>
<table class="table table table-striped table-hover table-condensed">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filename
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
r_name
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
normalized_names
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
canonical_names
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
label_normalized
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
label
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
item_no
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
item_of
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
ZA6928_v1-0-0.sav
</td>
<td style="text-align:left;">
qa8a_9
</td>
<td style="text-align:left;">
trust_in_institutions_army
</td>
<td style="text-align:left;">
trust_in_institutions_army
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6928_v1-0-0.sav
</td>
<td style="text-align:left;">
qa14_1
</td>
<td style="text-align:left;">
european_parliament_trust
</td>
<td style="text-align:left;">
european_parliament_trust
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA7576_v1-0-0.sav
</td>
<td style="text-align:left;">
qa6a_10
</td>
<td style="text-align:left;">
trust_in_institutions_european_union
</td>
<td style="text-align:left;">
trust_in_institutions_european_union
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8a_1
</td>
<td style="text-align:left;">
trust_in_institutions_written_press
</td>
<td style="text-align:left;">
trust_in_institutions_written_press
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6963_v1-0-0.sav
</td>
<td style="text-align:left;">
qa14_2
</td>
<td style="text-align:left;">
european_commission_trust
</td>
<td style="text-align:left;">
european_commission_trust
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6695_v1-1-0.sav
</td>
<td style="text-align:left;">
qc10_2
</td>
<td style="text-align:left;">
trust_in_accompanying_information_info_certified_by_independent_bodies
</td>
<td style="text-align:left;">
trust_in_accompanying_information_info_certified_by_independent_bodies
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA7562_v1-0-0.sav
</td>
<td style="text-align:left;">
qa3_4
</td>
<td style="text-align:left;">
trust_in_institutions_national_government
</td>
<td style="text-align:left;">
trust_in_institutions_national_government
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA5929_v3-0-0.sav
</td>
<td style="text-align:left;">
qa8r
</td>
<td style="text-align:left;">
general_trust_in_people_recoded
</td>
<td style="text-align:left;">
general_trust_in_people_recoded
</td>
<td style="text-align:left;">
tend_to_trust_7_8_in_qa8
</td>
<td style="text-align:left;">
Tend to trust (7-8 in qa8)
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA7576_v1-0-0.sav
</td>
<td style="text-align:left;">
qa6a_8
</td>
<td style="text-align:left;">
trust_in_institutions_national_government
</td>
<td style="text-align:left;">
trust_in_institutions_national_government
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA7576_v1-0-0.sav
</td>
<td style="text-align:left;">
qa14_2
</td>
<td style="text-align:left;">
european_commission_trust
</td>
<td style="text-align:left;">
european_commission_trust
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA7576_v1-0-0.sav
</td>
<td style="text-align:left;">
qa6b_4
</td>
<td style="text-align:left;">
trust_in_institutions_media_tcc
</td>
<td style="text-align:left;">
trust_in_institutions_media_tcc
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6928_v1-0-0.sav
</td>
<td style="text-align:left;">
qa8a_11
</td>
<td style="text-align:left;">
trust_in_institutions_reg_local_public_authorities
</td>
<td style="text-align:left;">
trust_in_institutions_reg_local_public_authorities
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6928_v1-0-0.sav
</td>
<td style="text-align:left;">
qa8a_14
</td>
<td style="text-align:left;">
trust_in_institutions_european_union
</td>
<td style="text-align:left;">
trust_in_institutions_european_union
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA7576_v1-0-0.sav
</td>
<td style="text-align:left;">
qa14_5
</td>
<td style="text-align:left;">
council_of_the_eu_trust
</td>
<td style="text-align:left;">
council_of_the_eu_trust
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6695_v1-1-0.sav
</td>
<td style="text-align:left;">
qc10_3
</td>
<td style="text-align:left;">
trust_in_accompanying_information_info_provided_by_brand_or_seller
</td>
<td style="text-align:left;">
trust_in_accompanying_information_info_provided_by_brand_or_seller
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
6
</td>
</tr>
</tbody>
</table>
<p>Let’s add back all value labels:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">trust_metadata</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span> (
    <span class="co"># previously we filtered tend to (not) agree, remove it</span>
    -<span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">all_of</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"label_normalized"</span>, <span class="st">"label"</span>))
    ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span> (
    <span class="co"># add back all value labels, i.e. various declines</span>
    <span class="no">metadata_database</span> <span class="kw">%&gt;%</span>
                <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span> ( <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">all_of</a></span>(<span class="no">select_metadata_vars</span>))
    )  <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/sample_n.html">sample_n</a></span>(<span class="fl">15</span>) <span class="kw">%&gt;%</span> <span class="co"># Print only a sample of 15 rows</span>
<span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/reexports.html">kable</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>(<span class="kw">bootstrap_options</span> <span class="kw">=</span>
                <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),
                <span class="kw">fixed_thead</span> <span class="kw">=</span> <span class="no">T</span>,
                <span class="kw">font_size</span> <span class="kw">=</span> <span class="fl">9</span>)</pre></body></html></div>
<table class="table table table-striped table-hover table-condensed">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
filename
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
r_name
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
normalized_names
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
canonical_names
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
item_no
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
item_of
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
label_normalized
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
label
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
ZA6963_v1-0-0.sav
</td>
<td style="text-align:left;">
qa14_5
</td>
<td style="text-align:left;">
council_of_the_eu_trust
</td>
<td style="text-align:left;">
council_of_the_eu_trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8a_5
</td>
<td style="text-align:left;">
trust_in_institutions_online_social_networks
</td>
<td style="text-align:left;">
trust_in_institutions_online_social_networks
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8a_6
</td>
<td style="text-align:left;">
trust_in_institutions_political_parties
</td>
<td style="text-align:left;">
trust_in_institutions_political_parties
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6928_v1-0-0.sav
</td>
<td style="text-align:left;">
qa8a_4
</td>
<td style="text-align:left;">
trust_in_institutions_internet
</td>
<td style="text-align:left;">
trust_in_institutions_internet
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6963_v1-0-0.sav
</td>
<td style="text-align:left;">
qa8b_4
</td>
<td style="text-align:left;">
trust_in_institutions_media_tcc
</td>
<td style="text-align:left;">
trust_in_institutions_media_tcc
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8a_7
</td>
<td style="text-align:left;">
trust_in_institutions_reg_local_public_authorities
</td>
<td style="text-align:left;">
trust_in_institutions_reg_local_public_authorities
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA7576_v1-0-0.sav
</td>
<td style="text-align:left;">
qa6a_7
</td>
<td style="text-align:left;">
trust_in_institutions_reg_local_public_authorities
</td>
<td style="text-align:left;">
trust_in_institutions_reg_local_public_authorities
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6928_v1-0-0.sav
</td>
<td style="text-align:left;">
qa8a_5
</td>
<td style="text-align:left;">
trust_in_institutions_online_social_networks
</td>
<td style="text-align:left;">
trust_in_institutions_online_social_networks
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:left;">
Tend not to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8a_6
</td>
<td style="text-align:left;">
trust_in_institutions_political_parties
</td>
<td style="text-align:left;">
trust_in_institutions_political_parties
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:left;">
Tend not to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA7562_v1-0-0.sav
</td>
<td style="text-align:left;">
qa3_6
</td>
<td style="text-align:left;">
trust_in_institutions_european_union
</td>
<td style="text-align:left;">
trust_in_institutions_european_union
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA7576_v1-0-0.sav
</td>
<td style="text-align:left;">
qa6a_8
</td>
<td style="text-align:left;">
trust_in_institutions_national_government
</td>
<td style="text-align:left;">
trust_in_institutions_national_government
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:left;">
Tend not to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6928_v1-0-0.sav
</td>
<td style="text-align:left;">
qa8a_12
</td>
<td style="text-align:left;">
trust_in_institutions_national_government
</td>
<td style="text-align:left;">
trust_in_institutions_national_government
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8a_2
</td>
<td style="text-align:left;">
trust_in_institutions_radio
</td>
<td style="text-align:left;">
trust_in_institutions_radio
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6928_v1-0-0.sav
</td>
<td style="text-align:left;">
qa14_2
</td>
<td style="text-align:left;">
european_commission_trust
</td>
<td style="text-align:left;">
european_commission_trust
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:left;">
Tend not to trust
</td>
</tr>
<tr>
<td style="text-align:left;">
ZA6643_v4-0-0.sav
</td>
<td style="text-align:left;">
qa8b_8
</td>
<td style="text-align:left;">
trust_in_institutions_united_nations_tcc
</td>
<td style="text-align:left;">
trust_in_institutions_united_nations_tcc
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:left;">
Tend to trust
</td>
</tr>
</tbody>
</table>
<div id="harmonization-of-value-labels" class="section level2">
<h2 class="hasAnchor">
<a href="#harmonization-of-value-labels" class="anchor"></a>Harmonization of Value Labels</h2>
<p>Let’s review the problems here.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">trust_with_decline</span>  <span class="kw">&lt;-</span> <span class="no">metadata_database</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span> ( <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">all_of</a></span>(<span class="no">select_metadata_vars</span>) ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">semi_join</a></span> ( <span class="no">trust_metadata</span> <span class="kw">%&gt;%</span>
                <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span> ( <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">all_of</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"filename"</span>, <span class="st">"r_name"</span>))),
              <span class="kw">by</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"filename"</span>, <span class="st">"r_name"</span>))

<span class="no">trust_var_labels</span> <span class="kw">&lt;-</span> <span class="no">trust_with_decline</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span> ( <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">all_of</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"label"</span>, <span class="st">"label_normalized"</span>, <span class="st">"item_no"</span>, <span class="st">"item_of"</span>))) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct_all.html">distinct_all</a></span> () <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span> ( <span class="no">label_normalized</span>, <span class="no">label</span>, <span class="no">item_of</span>)

<span class="no">trust_var_labels</span> <span class="kw">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/reexports.html">kable</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>(<span class="kw">bootstrap_options</span> <span class="kw">=</span>
                <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),
                <span class="kw">fixed_thead</span> <span class="kw">=</span> <span class="no">T</span>,
                <span class="kw">font_size</span> <span class="kw">=</span> <span class="fl">9</span> )</pre></body></html></div>
<table class="table table table-striped table-hover table-condensed">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
label
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
label_normalized
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
item_no
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
item_of
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Completely trust
</td>
<td style="text-align:left;">
completely_trust
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
DK
</td>
<td style="text-align:left;">
dk
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
DK
</td>
<td style="text-align:left;">
dk
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
DK
</td>
<td style="text-align:left;">
dk
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
DK
</td>
<td style="text-align:left;">
dk
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
Do not trust at all
</td>
<td style="text-align:left;">
do_not_trust_at_all
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
Do not trust at all
</td>
<td style="text-align:left;">
do_not_trust_at_all
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (CY-TCC in isocntry)
</td>
<td style="text-align:left;">
inap_cy_tcc_in_isocntry
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (MK ME RS AL TR in isocntry)
</td>
<td style="text-align:left;">
inap_mk_me_rs_al_tr_in_isocntry
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (not 1-3 in qb1_3)
</td>
<td style="text-align:left;">
inap_not_1_3_in_qb1_3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (not 1 in eu28)
</td>
<td style="text-align:left;">
inap_not_1_in_eu28
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (not coded 1 to 3 in qc1_3)
</td>
<td style="text-align:left;">
inap_not_coded_1_to_3_in_qc1_3
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (not CY-TCC in isocntry)
</td>
<td style="text-align:left;">
inap_not_cy_tcc_in_isocntry
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (not CY-TCC in isocntry and not 1 in eu28)
</td>
<td style="text-align:left;">
inap_not_cy_tcc_in_isocntry_and_not_1_in_eu28
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. not EU28 (coded 0 in eu28)
</td>
<td style="text-align:left;">
inap_not_eu28_coded_0_in_eu28
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Neither trust nor distrust (5-6 in qa8)
</td>
<td style="text-align:left;">
neither_trust_nor_distrust_5_6_in_qa8
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Refusal (SPONTANEOUS)
</td>
<td style="text-align:left;">
refusal_spontaneous
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend not to trust
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend not to trust
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend not to trust
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend not to trust
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend not to trust (1-4 in qa8)
</td>
<td style="text-align:left;">
tend_not_to_trust_1_4_in_qa8
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
6
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend to trust (7-8 in qa8)
</td>
<td style="text-align:left;">
tend_to_trust_7_8_in_qa8
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Totally trust
</td>
<td style="text-align:left;">
totally_trust
</td>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
6
</td>
</tr>
</tbody>
</table>
<p>We are dealing with different scales here. Let’s narrow down.</p>
<p>Some variables appear to have four categories, because the declined answers are differently coded in the Turkish Community of Cyprus. In other cases, though, this is just a different scale.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">trust_2_with_decline</span>  <span class="kw">&lt;-</span> <span class="no">trust_with_decline</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span> ( <span class="no">item_of</span> <span class="kw">&lt;=</span> <span class="fl">4</span>)

<span class="no">trust_2_var_labels</span> <span class="kw">&lt;-</span> <span class="no">trust_2_with_decline</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span> ( <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">all_of</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"label"</span>, <span class="st">"label_normalized"</span>,
                    <span class="st">"item_no"</span>, <span class="st">"item_of"</span>))
           ) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct_all.html">distinct_all</a></span> () <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span> ( <span class="no">label_normalized</span>, <span class="no">label</span>, <span class="no">item_of</span>)

<span class="no">trust_2_var_labels</span> <span class="kw">%&gt;%</span>
<span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/reexports.html">kable</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>(<span class="kw">bootstrap_options</span> <span class="kw">=</span>
                <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),
                <span class="kw">fixed_thead</span> <span class="kw">=</span> <span class="no">T</span>,
                <span class="kw">font_size</span> <span class="kw">=</span> <span class="fl">10</span> )</pre></body></html></div>
<table class="table table table-striped table-hover table-condensed">
<thead><tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
label
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
label_normalized
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
item_no
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
item_of
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
DK
</td>
<td style="text-align:left;">
dk
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
DK
</td>
<td style="text-align:left;">
dk
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (CY-TCC in isocntry)
</td>
<td style="text-align:left;">
inap_cy_tcc_in_isocntry
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (MK ME RS AL TR in isocntry)
</td>
<td style="text-align:left;">
inap_mk_me_rs_al_tr_in_isocntry
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (not 1 in eu28)
</td>
<td style="text-align:left;">
inap_not_1_in_eu28
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (not CY-TCC in isocntry)
</td>
<td style="text-align:left;">
inap_not_cy_tcc_in_isocntry
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. (not CY-TCC in isocntry and not 1 in eu28)
</td>
<td style="text-align:left;">
inap_not_cy_tcc_in_isocntry_and_not_1_in_eu28
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Inap. not EU28 (coded 0 in eu28)
</td>
<td style="text-align:left;">
inap_not_eu28_coded_0_in_eu28
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Neither trust nor distrust (5-6 in qa8)
</td>
<td style="text-align:left;">
neither_trust_nor_distrust_5_6_in_qa8
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Refusal (SPONTANEOUS)
</td>
<td style="text-align:left;">
refusal_spontaneous
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend not to trust
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend not to trust
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend not to trust (1-4 in qa8)
</td>
<td style="text-align:left;">
tend_not_to_trust_1_4_in_qa8
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend to trust
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
<tr>
<td style="text-align:left;">
Tend to trust (7-8 in qa8)
</td>
<td style="text-align:left;">
tend_to_trust_7_8_in_qa8
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
4
</td>
</tr>
</tbody>
</table>
<p>My approach would be this: 1. filter out all questions with normalized answer options <code>tend_to_trust</code> and <code>tend_not_to_trust</code>. These can be safely harmonized.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>There is clearly a lot of work to be done with the refusal options. I think that this would merit a different function and a different vocabulary, because missingness should consistently treated anyway. The treatment of missinginess in the R language will also raise issues, because the <code>NA</code> values is not class independent.</p></li>
<li><p>Agree on a class representation of the value labels and the missingness. A binary variable would lend itself to be numerically represented, but if we want to treat trust as a topic, which is sometimes coded differently, then a factor or character representation is better (and we should probably use their more modern vctrs versions.).</p></li>
<li><p>A factor representation is useful if we want to use the ordinary scale of the variable. In this case we must make sure that at each table join, the number and ordering of the factor levels is consistent.</p></li>
<li><p>I tend to belive that it is better to add back the ordinary scaling later, becasue it is not always necessary at all. (For example, the researcher may want to use this variables in PCA or select a few of them as indicators/dummies.) It is far more simple to give a character representation to these labels.</p></li>
<li><p>Manually find out what is going on with <code>tend_to_trust_7_8_in_qa8</code> <code>tend_not_to_trust_1_4_in_qa8</code>. If they can be safely treated as an exception and recoded to <code>tend_to_trust</code> and <code>tend_not_to_trust</code>, add them to the controlled vocabulary.</p></li>
<li><p>Leave out anything that has different labels than <code>tend_to_trust</code>, <code>tend_not_to_trust</code> or their missingness value.</p></li>
</ol>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">trust_vocabulary</span> <span class="kw">&lt;-</span> <span class="kw pkg">tibble</span><span class="kw ns">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span> (
  <span class="co"># maybe we can use a generic controlled vocabulary, for example</span>
  <span class="co"># Library of Congress</span>
  <span class="kw">topic_1</span> <span class="kw">=</span> <span class="st">'trust'</span>,
  <span class="co"># And if we find them, we can add GESIS or TNS/Kantar keywords here</span>
  <span class="kw">topic_2</span> <span class="kw">=</span> <span class="st">'trust, binary'</span>,
  <span class="kw">label_normalized</span> <span class="kw">=</span> <span class="no">trust_2_var_labels</span> <span class="kw">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span> (
      <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"tend_to|tend_not_to|inap|dk"</span>, <span class="no">label_normalized</span>)) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span> ( <span class="no">label_normalized</span> ) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/r/base/unlist.html">unlist</a></span> () <span class="kw">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(),
  <span class="kw">level</span> <span class="kw">=</span> <span class="fl">2</span> <span class="co"># I would not treat in R missings as levels</span>
)

<span class="no">trust_table</span> <span class="kw">&lt;-</span> <span class="no">trust_vocabulary</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(
    <span class="kw">character_value</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span>(
      <span class="co"># and create a surely harmonized character representation </span>
      <span class="fu"><a href="https://rdrr.io/r/base/grep.html">grepl</a></span>(<span class="st">"dk|inap"</span>, <span class="no">label_normalized</span>) ~ <span class="fl">NA_character_</span>,
      <span class="fu"><a href="https://rdrr.io/r/base/substr.html">substr</a></span>(<span class="no">label_normalized</span>, <span class="fl">1</span>,<span class="fl">7</span>) <span class="kw">==</span> <span class="st">"tend_to"</span> ~ <span class="st">"tend_to_trust"</span>,
    <span class="fl">TRUE</span> ~ <span class="st">"tend_not_to_trust"</span>),
    <span class="kw">numeric_value</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span> (
      <span class="no">character_value</span> <span class="kw">==</span> <span class="st">"tend_to"</span> ~ <span class="fl">1</span>,
      <span class="no">character_value</span> <span class="kw">==</span> <span class="st">"tend_not_to"</span> ~ <span class="fl">0</span>,
      <span class="fl">TRUE</span> ~ <span class="fl">NA_real_</span>),
    <span class="kw">missing</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html">case_when</a></span> (
      <span class="co"># it is useful for faster filtering of missingness</span>
      <span class="co"># and true value labels  </span>
      <span class="fu"><a href="https://rdrr.io/r/base/NA.html">is.na</a></span>(<span class="no">numeric_value</span>) ~ <span class="fl">TRUE</span>,
      <span class="fl">TRUE</span> ~ <span class="fl">FALSE</span>)
  )

<span class="no">trust_table</span> <span class="kw">%&gt;%</span>
  <span class="no">kable</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>(<span class="kw">bootstrap_options</span> <span class="kw">=</span>
                  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>),
                  <span class="kw">fixed_thead</span> <span class="kw">=</span> <span class="no">T</span>,
                  <span class="kw">font_size</span> <span class="kw">=</span> <span class="fl">10</span> ) <span class="kw">%&gt;%</span>
    <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/add_header_above.html">add_header_above</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Keywords"</span> <span class="kw">=</span> <span class="fl">2</span>,
                       <span class="st">"Label Identification"</span> <span class="kw">=</span> <span class="fl">2</span>,
                       <span class="st">"Value Harmonization"</span> <span class="kw">=</span> <span class="fl">3</span>))</pre></body></html></div>
<table class="table table table-striped table-hover table-condensed">
<thead>
<tr>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Keywords
</div>
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Label Identification
</div>
</th>
<th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Value Harmonization
</div>
</th>
</tr>
<tr>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
topic_1
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
topic_2
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
label_normalized
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
level
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
character_value
</th>
<th style="text-align:right;position: sticky; top:0; background-color: #FFFFFF;">
numeric_value
</th>
<th style="text-align:left;position: sticky; top:0; background-color: #FFFFFF;">
missing
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
trust
</td>
<td style="text-align:left;">
trust, binary
</td>
<td style="text-align:left;">
dk
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
trust
</td>
<td style="text-align:left;">
trust, binary
</td>
<td style="text-align:left;">
inap_cy_tcc_in_isocntry
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
trust
</td>
<td style="text-align:left;">
trust, binary
</td>
<td style="text-align:left;">
inap_mk_me_rs_al_tr_in_isocntry
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
trust
</td>
<td style="text-align:left;">
trust, binary
</td>
<td style="text-align:left;">
inap_not_1_in_eu28
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
trust
</td>
<td style="text-align:left;">
trust, binary
</td>
<td style="text-align:left;">
inap_not_cy_tcc_in_isocntry
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
trust
</td>
<td style="text-align:left;">
trust, binary
</td>
<td style="text-align:left;">
inap_not_cy_tcc_in_isocntry_and_not_1_in_eu28
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
trust
</td>
<td style="text-align:left;">
trust, binary
</td>
<td style="text-align:left;">
inap_not_eu28_coded_0_in_eu28
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
trust
</td>
<td style="text-align:left;">
trust, binary
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
trust
</td>
<td style="text-align:left;">
trust, binary
</td>
<td style="text-align:left;">
tend_not_to_trust_1_4_in_qa8
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
tend_not_to_trust
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
trust
</td>
<td style="text-align:left;">
trust, binary
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
<tr>
<td style="text-align:left;">
trust
</td>
<td style="text-align:left;">
trust, binary
</td>
<td style="text-align:left;">
tend_to_trust_7_8_in_qa8
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
tend_to_trust
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
TRUE
</td>
</tr>
</tbody>
</table>
<p>As far as I see, this can be a bulding block of an important metadata table, for example, a table of two-level categories. As far as I see it, this table is capable of harmonizing the two-level trust variables in all 28 Eurobarometers I checked.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span>(<span class="no">trust_table</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(
  <span class="st">".."</span>,   <span class="co"># we're in vignettes</span>
  <span class="st">"data-raw"</span>, <span class="st">"trust_table.rds"</span>),
  <span class="kw">version</span> <span class="kw">=</span> <span class="fl">2</span> <span class="co"># downward compatibility on CRAN</span>
  )</pre></body></html></div>
<p>Once we have a few more bits, for example, similar elements of other 2-value factors, we’ll bind them together in a small R file in data-raw, and export the final data file with <code><a href="https://usethis.r-lib.org/reference/use_data.html">usethis::use_data()</a></code> to the final data directory. After this, we’ll add the documentation in the <code>R</code> and <code>man</code> directories.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Daniel Antal.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
